-- Crear la base de datos
CREATE DATABASE IF NOT EXISTS food_delivery;

-- Usar la base de datos
USE food_delivery;

-- Tabla RESTAURANT
CREATE TABLE IF NOT EXISTS RESTAURANT (
    id VARCHAR(50) PRIMARY KEY,
    name VARCHAR(100),
    address VARCHAR(200),
    image VARCHAR(200)
);

-- Tabla DISHES
CREATE TABLE IF NOT EXISTS DISHES (
    id INT PRIMARY KEY AUTO_INCREMENT,
    id_restaurant VARCHAR(50),
    name VARCHAR(100),
    description VARCHAR(200),
    image VARCHAR(255),
    price DOUBLE,
    FOREIGN KEY (id_restaurant) REFERENCES RESTAURANT(id)
);


-- Tabla users
CREATE TABLE IF NOT EXISTS users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    email VARCHAR(100) UNIQUE, 
    password VARCHAR(100),
    verification_code INT 
);

-- Tabla orders
CREATE TABLE IF NOT EXISTS orders (
    id INT  PRIMARY KEY AUTO_INCREMENT,
    id_user INT,
    total DOUBLE,
    FOREIGN KEY (id_user) REFERENCES users(id)
);

-- Tabla intermedia orders_dishes
CREATE TABLE IF NOT EXISTS orders_dishes (
    order_id INT,
    dish_id INT,
    PRIMARY KEY (order_id, dish_id),
    FOREIGN KEY (order_id) REFERENCES orders(id),
    FOREIGN KEY (dish_id) REFERENCES DISHES(id)
);

